const helper=require("./helper");var xmlandjson=(()=>{return this.xmltojson=async(a,b,c)=>(console.log("xmltojson"),a&&0!=a.length?a?null==typeof b||"undefined"==typeof b?{status:400,message:"You haven't specified the data type (file or content)"}:b?this.tagExtractor(c?await helper.webFileReader(a):await helper.readFile(a,!0)):this.tagExtractor(a):{status:400,message:"The Data parameter is missing"}:{status:400,message:"Invalid"}),this.tagExtractor=a=>{console.log("tagExtractor");const b=helper.dataValidation(a);if(400===b.status)return b;const c=[];for(;0<a.length;){const b=a.slice(a.indexOf("<"),a.indexOf(">")+1);0==b.indexOf("</")?c.push({tag:this.getHeadOfTag(b),tagMode:"closing"}):c.push({tag:this.getHeadOfTag(b),attributes:this.attrExtrator(` ${this.getAttrsOfTag(b)} `),content:this.getContentOfTag(a),tagMode:"opening"}),a=a.slice(a.indexOf(">")+1)}return{status:200,message:c}},this.getHeadOfTag=a=>(console.log("getHeadOfTag"),a&&0!=a.length?a.slice(1,a.indexOf(" ")):null),this.getContentOfTag=a=>{if(console.log("getContentOfTag"),!a||0==a.length)return null;if(0==a.indexOf("<!--!"))return a.slice(0,a.indexOf("-->")+3);const b=a.slice(1);return b.indexOf(">")+1<b.indexOf("<")?b.slice(b.indexOf(">")+1,b.indexOf("<")):null},this.getAttrsOfTag=a=>{if(console.log("getAttrsOfTag"),!a||0==a.length)return null;let b=a.slice(a.indexOf(" ")+1,a.length);return 0<=a.indexOf(" ")?b.slice(0,b.length-("/"===b[b.length-2]?2:1)):null},this.attrExtrator=a=>{if(console.log("attrExtrator"),!a||0==a.length)return null;const b={};a=a.substring(1,a.length-1);const c=a.split("\" ");return c.forEach(a=>{if(a&&0>a.indexOf("null")&&0<a.length){a.lastIndexOf("\"")==a.length-1&&(a=a.substring(0,a.length-1));const c=a.split("=\"");c[0]&&c[1]&&0<c[0].length&&0<c[1].length&&(c[1]=c[1].trim(),"style"==c[0].trim()&&(c[1]=this.styleExtractor(c[1])),b[c[0].trim()]=c[1])}}),b},this.styleExtractor=a=>{if(console.log("styleExtractor"),!a||0==a.length)return null;const b={},c=a.split(";");return c.forEach(a=>{if(a&&0>a.indexOf("null")&&0<a.length){const c=a.split(":");c[0]&&c[1]&&0<c[0].length&&0<c[1].length&&(b[c[0].trim()]=c[1].trim())}}),b},this}).call({});"undefined"!=typeof module&&null!==module&&module.exports?module.exports=xmlandjson:"function"==typeof define&&define.amd&&define(function(){return xmlandjson});